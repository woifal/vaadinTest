"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var testing_1 = require('@angular/core/testing');
var polymer_element_1 = require('./polymer-element');
var core_1 = require('@angular/core');
var forms_1 = require('@angular/forms');
var platform_browser_1 = require('@angular/platform-browser');
var Polymer = window.Polymer;
describe('PolymerElement', function () {
    beforeEach(testing_1.async(function () {
        testing_1.TestBed.configureTestingModule({
            imports: [
                forms_1.ReactiveFormsModule
            ],
            declarations: [
                TestComponent,
                TestComponentForm,
                TestComponentCheckboxForm,
                TestComponentLightDom,
                TestComponentDomApi,
                polymer_element_1.PolymerElement('test-element'),
                polymer_element_1.PolymerElement('paper-checkbox')
            ],
            schemas: [core_1.CUSTOM_ELEMENTS_SCHEMA]
        });
        testing_1.TestBed.compileComponents();
    }));
    var testElement;
    var testComponent;
    var fixture;
    function createTestComponent(type) {
        fixture = testing_1.TestBed.createComponent(type);
        testElement = fixture.debugElement.query(function (el) { return el.name == 'test-element'; }).nativeElement;
        testComponent = fixture.componentInstance;
    }
    it('is defined', function () {
        expect(polymer_element_1.PolymerElement).toBeDefined();
    });
    it('is function', function () {
        expect(typeof polymer_element_1.PolymerElement).toBe('function');
    });
    describe('Developer experience', function () {
        it('should throw an error for non-registered elements', function () {
            try {
                polymer_element_1.PolymerElement('non-registered');
            }
            catch (error) {
                expect(error.message).toContain('element "non-registered" has not been registered');
            }
        });
    });
    describe('Two-way data binding', function () {
        beforeEach(function () { createTestComponent(TestComponent); });
        it('should have initial bound value', function () {
            fixture.detectChanges();
            expect(testElement.value).toEqual('foo');
        });
        it('should change value on bound value change', function () {
            testComponent.value = 'bar';
            fixture.detectChanges();
            expect(testElement.value).toEqual('bar');
        });
        it('should change bound value on value change', function () {
            testElement.value = 'bar';
            expect(testComponent.value).toEqual('bar');
        });
        it('should reflect change to a nested value (object)', function () {
            testComponent.nestedObject.value = 'foo';
            fixture.detectChanges();
            var nested = Polymer.dom(testElement.root).querySelector('#nested');
            expect(nested.getAttribute('nested-object-value')).toEqual('foo');
        });
        it('should reflect change to a nested value (array)', function () {
            testComponent.arrayObject.push('foo');
            fixture.detectChanges();
            var nested = Polymer.dom(testElement.root).querySelector('#nested');
            expect(nested.getAttribute('array-object-value')).toEqual('foo');
        });
    });
    describe('Form field', function () {
        var form;
        function formTests() {
            describe('Initial state', function () {
                it('should be initially pristine', function () {
                    expect(testElement.classList.contains('ng-pristine')).toEqual(true);
                });
                it('should be initially untouched', function () {
                    expect(testElement.classList.contains('ng-untouched')).toEqual(true);
                });
                it('should be invalid', function () {
                    expect(testElement.classList.contains('ng-invalid')).toEqual(true);
                });
                it('should be an invalid form', function () {
                    expect(form.valid).toEqual(false);
                });
                it('should not reflect invalid state to element initially', function () {
                    expect(testElement.invalid).toBeFalsy();
                });
            });
            describe('after value has changed', function () {
                beforeEach(function () {
                    testElement.value = 'qux';
                    fixture.detectChanges();
                });
                it('should be dirty on value change', function () {
                    expect(testElement.classList.contains('ng-dirty')).toEqual(true);
                });
                it('should be a valid form', function () {
                    expect(form.valid).toEqual(true);
                });
                it('should have correct value', function () {
                    expect(form.value.value).toEqual('qux');
                });
                it('should be valid', function () {
                    expect(testElement.classList.contains('ng-valid')).toEqual(true);
                });
                it('should reflect invalid state to testElement when value changed', function () {
                    testElement.value = '';
                    fixture.detectChanges();
                    expect(testElement.invalid).toEqual(true);
                });
            });
        }
        describe('Forms API', function () {
            beforeEach(function () {
                createTestComponent(TestComponentForm);
                form = new forms_1.FormGroup({ value: new forms_1.FormControl() });
                fixture.debugElement.componentInstance.form = form;
                fixture.detectChanges();
            });
            formTests();
        });
    });
    describe('Checked Element inside Form', function () {
        var form;
        var checkedElement;
        describe('initially false', function () {
            beforeEach(function () {
                createTestComponent(TestComponentCheckboxForm);
                form = new forms_1.FormGroup({ value: new forms_1.FormControl(false) });
                fixture.debugElement.componentInstance.form = form;
                fixture.detectChanges();
                checkedElement = fixture.debugElement.query(function (el) { return el.name == 'paper-checkbox'; }).nativeElement;
            });
            it('should set default value', function () {
                expect(checkedElement.checked).toEqual(false);
            });
            it('should set form value', function () {
                checkedElement.checked = true;
                expect(form.value.value).toEqual(true);
            });
        });
        describe('initially true', function () {
            beforeEach(function () {
                createTestComponent(TestComponentCheckboxForm);
                form = new forms_1.FormGroup({ value: new forms_1.FormControl(true) });
                fixture.debugElement.componentInstance.form = form;
                fixture.detectChanges();
                checkedElement = fixture.debugElement.query(function (el) { return el.name == 'paper-checkbox'; }).nativeElement;
            });
            it('should set default value', function () {
                expect(checkedElement.checked).toEqual(true);
            });
            it('should set form value', function () {
                checkedElement.checked = false;
                expect(form.value.value).toEqual(false);
            });
        });
    });
    describe('Light dom content', function () {
        beforeEach(function (done) {
            createTestComponent(TestComponentLightDom);
            setTimeout(done, 0);
        });
        function contentParentChildren(contentParentId) {
            var selected = testElement.$[contentParentId];
            return Polymer.dom(selected).getDistributedNodes();
        }
        function containsChild(contentParentId, childClassName) {
            var children = contentParentChildren(contentParentId);
            return Array.prototype.filter.call(children, function (node) {
                return node.classList && node.classList.contains(childClassName);
            }).length > 0;
        }
        it('should distribute correctly', function () {
            // Local dom
            expect(containsChild('selected', 'foo')).toEqual(false);
            expect(containsChild('all', 'foo')).toEqual(true);
            expect(containsChild('selected', 'bar')).toEqual(false);
            expect(containsChild('all', 'bar')).toEqual(false);
            expect(containsChild('selected', 'baz')).toEqual(true);
            var hasQux = Array.prototype.filter.call(contentParentChildren('all'), function (node) {
                return node.textContent.indexOf('Qux') !== -1;
            });
            expect(hasQux.length).toEqual(1);
            // Light dom
            expect(Polymer.dom(testElement).querySelector('.foo')).not.toEqual(null);
        });
        it('should support ngif', function (done) {
            testComponent.barVisible = true;
            fixture.detectChanges();
            // Distribution with polyfills is done with MutationObservers, so it is asynchronous
            setTimeout(function () {
                expect(containsChild('selected', 'bar')).toEqual(true);
                expect(containsChild('all', 'bar2')).toEqual(true);
                done();
            }, 0);
        });
    });
    describe('DOM API', function () {
        beforeEach(function () { createTestComponent(TestComponentDomApi); });
        it('should trigger one mutation after multiple operations', function (done) {
            var observerSpy = jasmine.createSpy('observerSpy');
            var domApi = Polymer.dom(testElement).observeNodes(observerSpy);
            testComponent.arrayObject = [1, 2, 3];
            fixture.detectChanges();
            testComponent.arrayObject.push(4);
            fixture.detectChanges();
            testComponent.arrayObject.pop();
            fixture.detectChanges();
            testComponent.arrayObject = [0, 1, 2];
            fixture.detectChanges();
            testComponent.barVisible = true;
            fixture.detectChanges();
            testComponent.barVisible = false;
            fixture.detectChanges();
            setTimeout(function () {
                expect(observerSpy).toHaveBeenCalledTimes(1);
                done();
            }, 0);
        });
        it('should have the correct adapter', function () {
            var functionName = function (fun) {
                var ret = fun.toString();
                ret = ret.substr('function '.length);
                ret = ret.substr(0, ret.indexOf('('));
                return ret;
            };
            var dom = platform_browser_1.__platform_browser_private__.getDOM();
            var adapterName = functionName(dom.constructor);
            if (Polymer.Settings.useShadow) {
                expect(adapterName).toEqual("PolymerDomAdapter");
            }
            else {
                expect(adapterName).toEqual("PolymerShadyDomAdapter");
            }
        });
    });
});
var TestComponent = (function () {
    function TestComponent() {
        this.value = 'foo';
        this.nestedObject = { value: undefined };
        this.arrayObject = [];
        this.barVisible = false;
    }
    TestComponent = __decorate([
        core_1.Component({
            template: "<test-element [(value)]=\"value\" [(nestedObject)]=\"nestedObject\" [(arrayObject)]=\"arrayObject\"></test-element>"
        }), 
        __metadata('design:paramtypes', [])
    ], TestComponent);
    return TestComponent;
}());
var TestComponentForm = (function () {
    function TestComponentForm() {
        this.value = 'foo';
    }
    TestComponentForm = __decorate([
        core_1.Component({
            template: "\n    <form [formGroup]=\"form\">\n      <test-element formControlName=\"value\" required></test-element>\n    </form>"
        }), 
        __metadata('design:paramtypes', [])
    ], TestComponentForm);
    return TestComponentForm;
}());
var TestComponentCheckboxForm = (function () {
    function TestComponentCheckboxForm() {
    }
    TestComponentCheckboxForm = __decorate([
        core_1.Component({
            // test-element added to make the global test setup not crash.
            template: "\n    <form [formGroup]=\"form\">\n      <paper-checkbox formControlName=\"value\"></paper-checkbox>\n    </form>\n    <test-element></test-element>"
        }), 
        __metadata('design:paramtypes', [])
    ], TestComponentCheckboxForm);
    return TestComponentCheckboxForm;
}());
var TestComponentLightDom = (function () {
    function TestComponentLightDom() {
    }
    TestComponentLightDom = __decorate([
        core_1.Component({
            template: "\n    <test-element [(value)]=\"value\" class=\"hascontent\">\n      <div class=\"foo\">Foo</div>\n      <div class=\"bar selected\" *ngIf=\"barVisible\">Bar</div>\n      <div class=\"bar2\" *ngIf=\"barVisible\">Bar2</div>\n      <div class=\"baz selected\">Baz</div>\n      Qux\n    </test-element>"
        }), 
        __metadata('design:paramtypes', [])
    ], TestComponentLightDom);
    return TestComponentLightDom;
}());
var TestComponentDomApi = (function () {
    function TestComponentDomApi() {
    }
    TestComponentDomApi = __decorate([
        core_1.Component({
            template: "\n    <test-element [(value)]=\"value\" class=\"hascontent\">\n      <div class=\"foo\" *ngFor=\"let item of arrayObject\">Foo {{item}}</div>\n      <div class=\"bar selected\" *ngIf=\"barVisible\">Bar</div>\n      <div class=\"bar2\" *ngIf=\"barVisible\">Bar2</div>\n      <div class=\"baz selected\">Baz</div>\n    </test-element>"
        }), 
        __metadata('design:paramtypes', [])
    ], TestComponentDomApi);
    return TestComponentDomApi;
}());
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9seW1lci1lbGVtZW50LnNwZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJwb2x5bWVyLWVsZW1lbnQuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsd0JBSU8sdUJBQXVCLENBQUMsQ0FBQTtBQUMvQixnQ0FBK0IsbUJBQW1CLENBQUMsQ0FBQTtBQUNuRCxxQkFBa0QsZUFBZSxDQUFDLENBQUE7QUFDbEUsc0JBQTRELGdCQUFnQixDQUFDLENBQUE7QUFDN0UsaUNBQTZDLDJCQUEyQixDQUFDLENBQUE7QUFFekUsSUFBTSxPQUFPLEdBQWMsTUFBTyxDQUFDLE9BQU8sQ0FBQztBQUUzQyxRQUFRLENBQUMsZ0JBQWdCLEVBQUU7SUFFekIsVUFBVSxDQUFDLGVBQUssQ0FBQztRQUNmLGlCQUFPLENBQUMsc0JBQXNCLENBQUM7WUFDN0IsT0FBTyxFQUFFO2dCQUNQLDJCQUFtQjthQUNwQjtZQUNELFlBQVksRUFBRTtnQkFDWixhQUFhO2dCQUNiLGlCQUFpQjtnQkFDakIseUJBQXlCO2dCQUN6QixxQkFBcUI7Z0JBQ3JCLG1CQUFtQjtnQkFDbkIsZ0NBQWMsQ0FBQyxjQUFjLENBQUM7Z0JBQzlCLGdDQUFjLENBQUMsZ0JBQWdCLENBQUM7YUFDakM7WUFDRCxPQUFPLEVBQUUsQ0FBQyw2QkFBc0IsQ0FBQztTQUNsQyxDQUFDLENBQUM7UUFDSCxpQkFBTyxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDOUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVKLElBQUksV0FBZ0IsQ0FBQztJQUNyQixJQUFJLGFBQTRCLENBQUM7SUFDakMsSUFBSSxPQUE4QixDQUFDO0lBRW5DLDZCQUE2QixJQUFTO1FBQ3BDLE9BQU8sR0FBRyxpQkFBTyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4QyxXQUFXLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsVUFBQyxFQUFFLElBQUssT0FBQSxFQUFFLENBQUMs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